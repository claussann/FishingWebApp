<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0f1923" />
  <title>Fishing Inventory</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <!-- ADSENSE â€” sostituisci ca-pub-XXXXXXXXXX con il tuo Publisher ID -->
  <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXX" crossorigin="anonymous"></script> -->
</head>
<body>

  <!-- ===================== SPLASH SCREEN ===================== -->
  <div id="splash-screen">
    <div class="splash-bubbles">
      <span class="bubble"></span><span class="bubble"></span><span class="bubble"></span>
      <span class="bubble"></span><span class="bubble"></span><span class="bubble"></span>
    </div>
    <div class="splash-content">
      <div class="splash-logo-wrap">
        <svg class="splash-svg" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="65" cy="65" r="60" fill="rgba(255,255,255,0.07)" stroke="rgba(255,255,255,0.2)" stroke-width="2"/>
          <ellipse cx="62" cy="68" rx="28" ry="16" fill="white" opacity="0.95"/>
          <polygon points="90,68 106,55 106,81" fill="white" opacity="0.75"/>
          <circle cx="47" cy="64" r="5" fill="#1a3a5c"/>
          <circle cx="45.5" cy="62.5" r="2" fill="white"/>
          <path d="M62 52 Q70 42 78 52" stroke="white" stroke-width="2.5" fill="none" stroke-linecap="round" opacity="0.6"/>
          <line x1="28" y1="20" x2="90" y2="57" stroke="#FFD166" stroke-width="3" stroke-linecap="round"/>
          <line x1="90" y1="57" x2="90" y2="78" stroke="#FFD166" stroke-width="2" stroke-dasharray="4,3" opacity="0.8"/>
          <ellipse cx="90" cy="82" rx="6" ry="4" fill="#FF6B6B"/>
          <ellipse cx="90" cy="79" rx="6" ry="3.5" fill="#FF4444"/>
        </svg>
      </div>
      <h1 class="splash-title">Fishing<br>Inventory</h1>
      <p class="splash-tagline">Il tuo diario di pesca digitale ğŸ£</p>
      <div class="splash-loader-wrap">
        <div class="splash-loader-bar">
          <div class="splash-loader-fill"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===================== APP ===================== -->
  <div id="app" class="hidden">

    <!-- HEADER -->
    <header id="main-header">
      <div class="header-brand">
        <svg class="header-logo-svg" viewBox="0 0 48 48" fill="none">
          <ellipse cx="22" cy="25" rx="13" ry="8" fill="#fff"/>
          <polygon points="35,25 44,18 44,32" fill="rgba(255,255,255,0.7)"/>
          <circle cx="16" cy="23" r="2.5" fill="#1a3a5c"/>
          <line x1="10" y1="9" x2="35" y2="23" stroke="#FFD166" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="35" y1="23" x2="35" y2="33" stroke="#FFD166" stroke-width="1.5" stroke-dasharray="3,2"/>
          <circle cx="35" cy="36" r="3" fill="#FF6B6B"/>
        </svg>
        <span class="header-brand-name">Fishing Inventory</span>
      </div>
      <nav class="navbar">
        <button class="nav-btn active" data-section="home">ğŸ  Home</button>
        <button class="nav-btn" data-section="attrezzatura">ğŸ£ Attrezzatura</button>
        <button class="nav-btn" data-section="spot">ğŸ“ Spot</button>
        <button class="nav-btn" data-section="diario">ğŸ“” Diario</button>
        <button class="nav-btn" data-section="catture">ğŸŸ Catture</button>
        <button class="nav-btn" data-section="statistiche">ğŸ“Š Statistiche</button>
        <button class="nav-btn nav-backup" id="btn-backup">ğŸ’¾ Salva</button>
        <button class="nav-btn nav-import" id="btn-import">ğŸ“‚ Carica</button>
        <button class="pwa-install-btn hidden" id="btn-pwa-install" title="Installa App">ğŸ“² Scarica App</button>
        <button class="theme-toggle" id="btn-theme" title="Cambia tema">ğŸŒ™</button>
      </nav>
      <button class="hamburger" id="hamburger">â˜°</button>
    </header>

    <!-- MOBILE NAV -->
    <div class="mobile-nav hidden" id="mobile-nav">
      <button class="mob-btn" data-section="home">ğŸ  Home</button>
      <button class="mob-btn" data-section="attrezzatura">ğŸ£ Attrezzatura</button>
      <button class="mob-btn" data-section="spot">ğŸ“ Spot</button>
      <button class="mob-btn" data-section="diario">ğŸ“” Diario</button>
      <button class="mob-btn" data-section="catture">ğŸŸ Catture</button>
      <button class="mob-btn" data-section="statistiche">ğŸ“Š Statistiche</button>
      <button class="mob-btn mob-backup" id="btn-backup-mob">ğŸ’¾ Salva Backup</button>
      <button class="mob-btn mob-import" id="btn-import-mob">ğŸ“‚ Carica Backup</button>
      <button class="mob-btn mob-pwa hidden" id="btn-pwa-mob">ğŸ“² Scarica App</button>
      <button class="mob-btn mob-theme" id="btn-theme-mob">ğŸŒ™ Cambia Tema</button>
    </div>

    <!-- ============ HOME ============ -->
    <section id="section-home" class="section active">

      <!-- ADSENSE SLOT â€” Banner responsive sotto header (solo homepage) -->
      <div class="ad-banner-top">
        <!-- ADSENSE SLOT â€” sostituire con blocco ins quando attivo -->
      </div>

      <div class="home-hero">
        <div class="hero-text">
          <h2 class="hero-title">Ciao, pescatore! ğŸ‘‹</h2>
          <p class="hero-sub">Gestisci attrezzatura, spot, uscite e statistiche tutto in un posto.</p>
        </div>
        <div class="hero-fish-deco">ğŸŸ</div>
      </div>

      <div class="home-grid">
        <!-- METEO -->
        <div class="card card-meteo">
          <div class="card-head">
            <span class="card-emoji" id="meteo-icon-display">ğŸŒ¤ï¸</span>
            <div>
              <h3>Meteo per la Pesca</h3>
              <p class="card-sub">Cerca la tua cittÃ </p>
            </div>
          </div>
          <div class="meteo-search-row">
            <input type="text" id="meteo-city" placeholder="Es: Roma, Milano..." />
            <button id="btn-meteo" class="btn-primary">Cerca</button>
          </div>
          <div id="meteo-loading" class="info-msg hidden">â³ Ricerca...</div>
          <div id="meteo-error" class="error-msg hidden">âŒ CittÃ  non trovata.</div>
          <div id="meteo-result" class="meteo-result hidden">
            <div class="meteo-main">
              <span class="meteo-temp" id="meteo-temp">--</span>
              <div>
                <div class="meteo-city-name" id="meteo-city-name"></div>
                <div class="meteo-desc" id="meteo-desc"></div>
              </div>
            </div>
            <div class="meteo-chips" id="meteo-extra"></div>
          </div>
        </div>

        <!-- STATS RAPIDE -->
        <div class="card card-stats">
          <div class="card-head">
            <span class="card-emoji">ğŸ“Š</span>
            <div><h3>Il tuo Inventario</h3></div>
          </div>
          <div class="quick-stats-grid">
            <div class="qstat" onclick="showSection('attrezzatura')">
              <span class="qstat-icon">ğŸ£</span>
              <span class="qstat-num" id="stat-att">0</span>
              <span class="qstat-label">Attrezzature</span>
            </div>
            <div class="qstat" onclick="showSection('spot')">
              <span class="qstat-icon">ğŸ“</span>
              <span class="qstat-num" id="stat-spot">0</span>
              <span class="qstat-label">Spot</span>
            </div>
            <div class="qstat" onclick="showSection('diario')">
              <span class="qstat-icon">ğŸ“”</span>
              <span class="qstat-num" id="stat-uscite">0</span>
              <span class="qstat-label">Uscite</span>
            </div>
            <div class="qstat" onclick="showSection('catture')">
              <span class="qstat-icon">ğŸŸ</span>
              <span class="qstat-num" id="stat-catture">0</span>
              <span class="qstat-label">Catture</span>
            </div>
          </div>
        </div>

        <!-- AUTOSAVE -->
        <div class="card card-autosave">
          <div class="card-head">
            <span class="card-emoji">ğŸ”„</span>
            <div>
              <h3>Salvataggio Automatico</h3>
              <p class="card-sub" id="autosave-status-label">Disattivato</p>
            </div>
            <label class="toggle-switch" title="Attiva salvataggio automatico">
              <input type="checkbox" id="autosave-toggle" />
              <span class="toggle-slider"></span>
            </label>
          </div>
          <p class="autosave-desc" id="autosave-desc">
            Attiva per salvare automaticamente ad ogni modifica.
          </p>
          <!-- ADSENSE SLOT â€” sostituire con blocco ins quando attivo -->
        </div>
        <div class="card card-ultima card-full">
          <div class="card-head">
            <span class="card-emoji">ğŸ•</span>
            <div><h3>Ultima Uscita</h3></div>
          </div>
          <div id="ultima-uscita-content">
            <p class="empty-inline">Nessuna uscita registrata ancora.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ ATTREZZATURA ============ -->
    <section id="section-attrezzatura" class="section hidden">
      <div class="section-inner">
        <div class="att-layout">
          <aside class="sidebar">
            <h3 class="sidebar-title">Filtri</h3>
            <button class="filter-btn active" data-filter="tutti">ğŸ—‚ï¸ Tutti</button>
            <button class="filter-btn" data-filter="canna">ğŸ£ Canne</button>
            <button class="filter-btn" data-filter="mulinello">âš™ï¸ Mulinelli</button>
            <button class="filter-btn" data-filter="minuteria">ğŸª Minuteria</button>
            <div class="sidebar-count" id="sidebar-count">0 elementi</div>
          </aside>
          <div class="att-main">
            <div class="section-top-bar">
              <h2 class="page-title">ğŸ£ Attrezzatura</h2>
              <button class="btn-primary" id="btn-add-att">â• Aggiungi</button>
            </div>
            <div id="att-list" class="grid-list">
              <div class="empty-state" id="att-empty">
                <div class="empty-icon">ğŸ£</div>
                <p>Nessuna attrezzatura.<br>Aggiungine una!</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ SPOT ============ -->
    <section id="section-spot" class="section hidden">
      <div class="section-inner">
        <div class="section-top-bar">
          <h2 class="page-title">ğŸ“ Spot di Pesca</h2>
          <button class="btn-primary" id="btn-save-spot">ğŸ“Œ Salva Spot</button>
        </div>
        <div id="geo-error" class="error-msg hidden">âŒ Geolocalizzazione non disponibile.</div>
        <div id="map" class="map-container"></div>
        <h3 class="sub-title">Spot Salvati</h3>
        <div id="spot-list" class="grid-list">
          <div class="empty-state" id="spot-empty">
            <div class="empty-icon">ğŸ“</div>
            <p>Nessuno spot salvato.<br>Clicca sulla mappa e salva!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ DIARIO ============ -->
    <section id="section-diario" class="section hidden">
      <div class="section-inner">
        <div class="section-top-bar">
          <h2 class="page-title">ğŸ“” Diario Uscite</h2>
          <button class="btn-primary" id="btn-add-uscita">â• Nuova Uscita</button>
        </div>
        <div id="diario-list" class="diario-list">
          <div class="empty-state" id="diario-empty">
            <div class="empty-icon">ğŸ“”</div>
            <p>Nessuna uscita registrata.<br>Aggiungi la tua prima avventura!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ STATISTICHE ============ -->
    <section id="section-statistiche" class="section hidden">
      <div class="section-inner">
        <h2 class="page-title">ğŸ“Š Statistiche</h2>
        <div class="stats-layout">
          <!-- Grafico uscite per mese -->
          <div class="card stat-card-big">
            <div class="card-head">
              <span class="card-emoji">ğŸ“…</span>
              <div>
                <h3>Uscite per Mese</h3>
                <p class="card-sub" id="stats-year-label">Anno corrente</p>
              </div>
              <div class="year-nav">
                <button class="btn-year" id="btn-year-prev">â—€</button>
                <span id="stats-year">2025</span>
                <button class="btn-year" id="btn-year-next">â–¶</button>
              </div>
            </div>
            <div class="chart-wrap">
              <canvas id="chart-uscite"></canvas>
              <div id="chart-empty" class="chart-empty hidden">
                <span>ğŸ“Š</span>
                <p>Nessuna uscita nell'anno selezionato</p>
              </div>
            </div>
          </div>

          <!-- Riepilogo numerico -->
          <div class="stats-mini-grid">
            <div class="card mini-stat">
              <span class="mini-stat-icon">ğŸ“”</span>
              <span class="mini-stat-num" id="ms-tot-uscite">0</span>
              <span class="mini-stat-label">Uscite Totali</span>
            </div>
            <div class="card mini-stat">
              <span class="mini-stat-icon">ğŸ“</span>
              <span class="mini-stat-num" id="ms-spot-unici">0</span>
              <span class="mini-stat-label">Spot Visitati</span>
            </div>
            <div class="card mini-stat">
              <span class="mini-stat-icon">ğŸ£</span>
              <span class="mini-stat-num" id="ms-att-usate">0</span>
              <span class="mini-stat-label">Attrezz. Usate</span>
            </div>
            <div class="card mini-stat">
              <span class="mini-stat-icon">ğŸ“…</span>
              <span class="mini-stat-num" id="ms-mese-top">-</span>
              <span class="mini-stat-label">Mese Top</span>
            </div>
          </div>

          <!-- Spot piÃ¹ visitati -->
          <div class="card stat-card-big">
            <div class="card-head">
              <span class="card-emoji">ğŸ†</span>
              <div><h3>Spot PiÃ¹ Visitati</h3></div>
            </div>
            <div id="top-spot-list" class="top-list">
              <p class="empty-inline">Nessun dato disponibile.</p>
            </div>
          </div>

          <!-- Attrezzatura piÃ¹ usata -->
          <div class="card stat-card-big">
            <div class="card-head">
              <span class="card-emoji">â­</span>
              <div><h3>Attrezzatura PiÃ¹ Usata</h3></div>
            </div>
            <div id="top-att-list" class="top-list">
              <p class="empty-inline">Nessun dato disponibile.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ CATTURE ============ -->
    <section id="section-catture" class="section hidden">
      <div class="section-inner">
        <div class="section-top-bar">
          <h2 class="page-title">ğŸŸ Le mie Catture</h2>
          <button class="btn-primary" id="btn-add-cattura">â• Aggiungi Cattura</button>
        </div>
        <div id="catture-list" class="catture-grid">
          <div class="empty-state" id="catture-empty">
            <div class="empty-icon">ğŸŸ</div>
            <p>Nessuna cattura registrata.<br>Aggiungi la tua prima!</p>
          </div>
        </div>
      </div>
    </section>

  </div><!-- /app -->

  <!-- ===== MODALI ===== -->

  <!-- MODALE ATTREZZATURA -->
  <div id="modal-att" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3>â• Nuova Attrezzatura</h3>
        <button class="modal-close" id="modal-att-close">âœ•</button>
      </div>
      <form id="form-att" class="modal-form" novalidate>
        <div class="form-group">
          <label>Tipo *</label>
          <select id="att-tipo" required>
            <option value="">-- Seleziona tipo --</option>
            <option value="canna">ğŸ£ Canna</option>
            <option value="mulinello">âš™ï¸ Mulinello</option>
            <option value="minuteria">ğŸª Minuteria</option>
          </select>
        </div>
        <div class="form-group">
          <label>Ambiente di Pesca</label>
          <select id="att-ambiente">
            <option value="">-- Seleziona ambiente --</option>
            <option value="mare">ğŸŒŠ Mare</option>
            <option value="barca">â›µ Barca</option>
            <option value="dolce">ğŸï¸ Acqua Dolce</option>
          </select>
        </div>
        <div class="form-group" id="att-tecnica-group" style="display:none">
          <label>Tecnica di Pesca</label>
          <select id="att-tecnica">
            <option value="">-- Seleziona tecnica --</option>
          </select>
        </div>
        <div class="form-group">
          <label>Nome *</label>
          <input type="text" id="att-nome" placeholder="Es: Shimano Stradic FL 4000" required />
        </div>
        <div class="form-group">
          <label>Tipologia / Grammatura</label>
          <input type="text" id="att-tipologia" placeholder="Es: Spinning, 20g, Match..." />
        </div>
        <div class="form-group">
          <label>QuantitÃ </label>
          <input type="number" id="att-quantita" min="1" value="1" placeholder="1" />
        </div>
        <div class="form-group">
          <label>Note</label>
          <textarea id="att-note" placeholder="Note aggiuntive..." rows="2"></textarea>
        </div>
        <div class="form-error hidden" id="form-att-error">Compila i campi obbligatori.</div>
        <button type="submit" class="btn-primary btn-full">ğŸ’¾ Salva</button>
      </form>
    </div>
  </div>

  <!-- MODALE SPOT -->
  <div id="modal-spot" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸ“Œ Salva Spot</h3>
        <button class="modal-close" id="modal-spot-close">âœ•</button>
      </div>
      <form id="form-spot" class="modal-form" novalidate>
        <div class="form-group">
          <label>Nome Spot *</label>
          <input type="text" id="spot-nome" placeholder="Es: Lago di Como - Nord" required />
        </div>
        <div class="form-group">
          <label>Categoria</label>
          <select id="spot-categoria">
            <option value="">-- Seleziona categoria --</option>
            <option value="spiaggia">ğŸ–ï¸ Spiaggia</option>
            <option value="scogliera">ğŸª¨ Scogliera</option>
            <option value="porto">âš“ Porto / Molo</option>
            <option value="diga">ğŸš§ Diga / Frangiflutti</option>
            <option value="mare-aperto">ğŸŒŠ Mare Aperto</option>
            <option value="laguna">ğŸŸ Laguna / Estuario</option>
            <option value="lago">ğŸï¸ Lago</option>
            <option value="fiume">ã€°ï¸ Fiume</option>
            <option value="torrente">ğŸ’§ Torrente</option>
            <option value="canale">ğŸŒ¿ Canale</option>
            <option value="diga-invaso">ğŸ”ï¸ Diga / Invaso</option>
          </select>
        </div>
        <div class="form-group">
          <label>Note</label>
          <textarea id="spot-note" placeholder="Tipo pesca, specie, orari..." rows="2"></textarea>
        </div>
        <div class="form-group">
          <label>ğŸ“· Foto Spot</label>
          <label class="foto-upload-btn">
            ğŸ“· Scatta / Scegli Foto
            <input type="file" id="spot-foto-input" accept="image/*" capture="environment" style="display:none" />
          </label>
          <div id="spot-foto-preview" class="foto-preview-wrap hidden">
            <img id="spot-foto-img" class="foto-preview-img" src="" alt="Preview spot" />
            <button type="button" class="foto-remove-btn" id="spot-foto-remove">âœ• Rimuovi</button>
          </div>
        </div>
        <div class="spot-coords-preview" id="spot-coords-preview"></div>
        <div class="form-error hidden" id="form-spot-error">Inserisci il nome dello spot.</div>
        <button type="submit" class="btn-primary btn-full">ğŸ“Œ Salva Spot</button>
      </form>
    </div>
  </div>

  <!-- MODALE USCITA -->
  <div id="modal-uscita" class="modal-overlay hidden">
    <div class="modal modal-wide">
      <div class="modal-header">
        <h3>ğŸ“” Nuova Uscita</h3>
        <button class="modal-close" id="modal-uscita-close">âœ•</button>
      </div>
      <form id="form-uscita" class="modal-form" novalidate>
        <div class="form-row">
          <div class="form-group">
            <label>Data *</label>
            <input type="date" id="uscita-data" required />
          </div>
          <div class="form-group">
            <label>Orario</label>
            <input type="time" id="uscita-ora" />
          </div>
        </div>
        <div class="form-group">
          <label>Spot utilizzato</label>
          <select id="uscita-spot">
            <option value="">-- Nessuno / Non salvato --</option>
          </select>
        </div>
        <div class="form-group">
          <label>Attrezzatura utilizzata</label>
          <div id="uscita-att-checks" class="checks-grid"></div>
        </div>
        <div class="form-group">
          <label>Note / Commenti</label>
          <textarea id="uscita-note" placeholder="Come Ã¨ andata? Catture, condizioni meteo, osservazioni..." rows="3"></textarea>
        </div>
        <div class="form-error hidden" id="form-uscita-error">Inserisci almeno la data.</div>
        <button type="submit" class="btn-primary btn-full">ğŸ’¾ Salva Uscita</button>
      </form>
    </div>
  </div>

  <!-- Input file nascosto per importazione JSON -->
  <input type="file" id="import-file-input" accept=".json" style="display:none" />

  <!-- MODALE CONFERMA IMPORTAZIONE -->
  <div id="modal-import" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸ“‚ Importa Backup</h3>
        <button class="modal-close" id="modal-import-close">âœ•</button>
      </div>
      <div class="modal-form">
        <div class="import-info">
          <div class="import-preview" id="import-preview"></div>
          <div class="import-warning">
            âš ï¸ <strong>Attenzione:</strong> l'importazione sovrascriverÃ  tutti i dati attuali (attrezzatura, spot e diario). Questa operazione non Ã¨ reversibile.
          </div>
        </div>
        <div class="form-error hidden" id="import-error">File non valido o corrotto.</div>
        <div style="display:flex;gap:10px;margin-top:4px;">
          <button class="btn-cancel btn-full" id="btn-import-cancel">âœ• Annulla</button>
          <button class="btn-primary btn-full" id="btn-import-confirm">âœ… Conferma Importazione</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODALE CATTURA -->
  <div id="modal-cattura" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸŸ Nuova Cattura</h3>
        <button class="modal-close" id="modal-cattura-close">âœ•</button>
      </div>
      <form id="form-cattura" class="modal-form" novalidate>
        <div class="form-row">
          <div class="form-group">
            <label>Data *</label>
            <input type="date" id="cattura-data" required />
          </div>
          <div class="form-group">
            <label>Peso (kg)</label>
            <input type="number" id="cattura-peso" min="0" step="0.01" placeholder="Es: 1.25" />
          </div>
        </div>
        <div class="form-group">
          <label>Tipo di Pesce *</label>
          <input type="text" id="cattura-specie" placeholder="Es: Spigola, Carpa, Trota..." required />
        </div>
        <div class="form-group">
          <label>Note</label>
          <textarea id="cattura-note" placeholder="Esca usata, spot, condizioni..." rows="2"></textarea>
        </div>
        <div class="form-group">
          <label>ğŸ“· Foto Cattura</label>
          <label class="foto-upload-btn">
            ğŸ“· Scatta / Scegli Foto
            <input type="file" id="cattura-foto-input" accept="image/*" capture="environment" style="display:none" />
          </label>
          <div id="cattura-foto-preview" class="foto-preview-wrap hidden">
            <img id="cattura-foto-img" class="foto-preview-img" src="" alt="Preview cattura" />
            <button type="button" class="foto-remove-btn" id="cattura-foto-remove">âœ• Rimuovi</button>
          </div>
        </div>
        <div class="form-error hidden" id="form-cattura-error">Compila i campi obbligatori.</div>
        <button type="submit" class="btn-primary btn-full">ğŸ’¾ Salva Cattura</button>
      </form>
    </div>
  </div>

  <!-- Modale fullscreen foto -->
  <div id="modal-foto" class="modal-overlay hidden" onclick="document.getElementById('modal-foto').classList.add('hidden')">
    <div class="foto-fullscreen-wrap" onclick="event.stopPropagation()">
      <img id="modal-foto-img" src="" alt="Foto" />
      <button class="foto-fullscreen-close" onclick="document.getElementById('modal-foto').classList.add('hidden')">âœ•</button>
    </div>
  </div>

  <!-- FIRMA AUTORE â€” fixed bottom right -->
  <div class="firma-fixed">Autore Claudio Sanna</div>

  <!-- ADSENSE SLOT â€” Sticky anchor banner mobile only -->
  <div class="ad-anchor-mobile">
    <!-- ADSENSE SLOT â€” sostituire con blocco ins quando attivo -->
  </div>

  <!-- MODALE INFO SALVA -->
  <div id="modal-salva-info" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸ’¾ Come funziona il Salvataggio</h3>
        <button class="modal-close" id="modal-salva-info-close">âœ•</button>
      </div>
      <div class="modal-form">
        <div class="info-block">
          <div class="info-section">
            <span class="info-icon">ğŸ“±</span>
            <div>
              <strong>Android (Chrome)</strong>
              <p>Il file viene scaricato automaticamente. Trovi <code>fishing-inventory-backup-DATA.json</code> nella cartella <strong>Download</strong> del tuo telefono, oppure nelle notifiche in basso.</p>
            </div>
          </div>
          <div class="info-section">
            <span class="info-icon">ğŸ</span>
            <div>
              <strong>iPhone / iPad (Safari)</strong>
              <p>Tocca <strong>Condividi â†’ Salva su File</strong> per salvare nell'app File. Puoi poi trovarlo in <strong>Il mio iPhone â†’ Download</strong>.</p>
            </div>
          </div>
          <div class="info-section">
            <span class="info-icon">ğŸ’»</span>
            <div>
              <strong>PC / Mac</strong>
              <p>Il file va nella cartella <strong>Download</strong> configurata nel browser. Su Chrome puoi scegliere dove salvarlo dalle impostazioni.</p>
            </div>
          </div>
          <div class="info-section info-tip">
            <span class="info-icon">ğŸ’¡</span>
            <div>
              <strong>Sostituzione file</strong>
              <p>Per <strong>sostituire il vecchio backup</strong> attiva il <strong>Salvataggio Automatico</strong> nella Home: ogni modifica salva automaticamente sul file scelto (solo browser compatibili con File System Access API).</p>
            </div>
          </div>
        </div>
        <button class="btn-primary btn-full" id="btn-salva-confirm">ğŸ’¾ Salva ora</button>
      </div>
    </div>
  </div>

  <!-- MODALE INFO CARICA -->
  <div id="modal-carica-info" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸ“‚ Come funziona il Caricamento</h3>
        <button class="modal-close" id="modal-carica-info-close">âœ•</button>
      </div>
      <div class="modal-form">
        <div class="info-block">
          <div class="info-section">
            <span class="info-icon">ğŸ“</span>
            <div>
              <strong>Seleziona il file di backup</strong>
              <p>Scegli il file <code>.json</code> precedentemente salvato con il tasto <strong>ğŸ’¾ Salva</strong>. Funziona sia da PC che da smartphone.</p>
            </div>
          </div>
          <div class="info-section">
            <span class="info-icon">ğŸ“±</span>
            <div>
              <strong>Da smartphone</strong>
              <p>Cerca il file nella cartella <strong>Download</strong> o dove lo hai salvato. Su iPhone controlla l'app <strong>File</strong>.</p>
            </div>
          </div>
          <div class="info-section info-tip">
            <span class="info-icon">âš ï¸</span>
            <div>
              <strong>Attenzione</strong>
              <p>Il caricamento <strong>sostituisce tutti i dati attuali</strong> (attrezzatura, spot, diario, catture). Fai prima un backup se hai dati da conservare.</p>
            </div>
          </div>
          <div class="info-section">
            <span class="info-icon">ğŸ”„</span>
            <div>
              <strong>Cambio dispositivo</strong>
              <p>Salva il file sul vecchio dispositivo, trasferiscilo (email, cloud, WhatsApp a te stesso) e caricalo sul nuovo. Tutti i dati e le foto vengono ripristinati.</p>
            </div>
          </div>
        </div>
        <button class="btn-primary btn-full" id="btn-carica-confirm">ğŸ“‚ Scegli file da caricare</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
